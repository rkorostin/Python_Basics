from pathlib import Path


def rename_files(desired_name, num_digits, source_extension, target_extension, name_range):
    """
    Функция переименовывает файлы в текущем каталоге с заданными параметрами:
    - desired_name: желаемое имя, которое будет добавлено к оригинальному имени файла (может быть пустым)
    - num_digits: количество цифр в порядковом номере, который будет добавлен к имени файла
    - source_extension: расширение исходных файлов, которые будут переименованы
    - target_extension: расширение, которое будет добавлено к новым именам файлов
    - name_range: диапазон символов в оригинальном имени файла, который будет сохранен
    (например, [3, 6] означает, что будут сохранены символы с позиции 3 до 6 включительно)
    Принцип работы:
    Функция получает список файлов в текущем каталоге, фильтрует его по расширению
    исходного файла, затем перебирает и переименовывает файлы. Для каждого файла она получает
    оригинальное имя, добавляет желаемое имя (если передано), генерирует порядковый номер с
    заданным количеством цифр, формирует новое имя файла и переименовывает его.
    """
    # Получаем список файлов в текущем каталоге
    files = list(Path('.').iterdir())

    # Фильтруем файлы по расширению исходного файла
    source_files = [file for file in files if file.suffix == source_extension]

    # Перебираем файлы
    for i, file in enumerate(source_files):
        # Получаем оригинальное имя файла
        original_name = file.stem[:name_range[1]]

        # Добавляем желаемое конечное имя, если передано
        if desired_name:
            original_name += desired_name

        # Генерируем порядковый номер с заданным количеством цифр
        number = str(i).zfill(num_digits)

        # Формируем новое имя файла
        new_name = original_name + number + target_extension

        # Переименовываем файл
        file.rename(new_name)
